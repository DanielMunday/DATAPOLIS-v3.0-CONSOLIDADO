DATAPOLIS SpA

PROMPTS DE IMPLEMENTACIÓN

PAE — PRECESSION ANALYTICS ENGINE (M11)

Guía Operativa para Implementación en Chats Dedicados

  ---------------------------- ------------------------------------------
  Documento                    Prompts de Implementación PAE M11

  Fecha                        05 de Febrero de 2026

  Autor                        Daniel / DATAPOLIS SpA

  Chat Origen                  PAE — Precesión Conceptual

  Destino 1                    Chat DATAPOLIS v3.0

  Destino 2                    Chat ÁGORA v4.0 / AGORA 5
  ---------------------------- ------------------------------------------

Cada prompt incluye contexto completo, instrucciones secuenciales y criterios de validación

1. INSTRUCCIONES DE USO

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| CÓMO USAR ESTE DOCUMENTO                                                                                                                                                                                                                                                                                                                                                                                  |
|                                                                                                                                                                                                                                                                                                                                                                                                           |
| Este documento contiene los prompts de implementación listos para copiar y pegar en cada chat dedicado de Claude. Cada prompt está diseñado para activar el contexto correcto, recuperar el código existente de la plataforma correspondiente, e implementar el Módulo M11 PAE integrado con los módulos ya desarrollados. Los prompts están en bloques de código (fondo oscuro) para facilitar la copia. |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

1.1 Secuencia de Implementación

  ------ ---------------- ------------------------------- ------------------------------------------------------- -----------------
  Paso   Chat Destino     Prompt                          Resultado Esperado                                      Duración Est.

  1      DATAPOLIS v3.0   Prompt A: Core Backend PAE      PrecessionService, Controller, Migraciones, Rutas API   1 sesión

  2      DATAPOLIS v3.0   Prompt B: Integración Módulos   Conexiones M04-M16, Event listeners, Tests              1 sesión

  3      DATAPOLIS v3.0   Prompt C: Frontend Dashboard    Dashboard precesional React/Next.js                     1 sesión

  4      ÁGORA v4.0       Prompt D: Core Backend PAE      precession_router, service, spatial_engine              1 sesión

  5      ÁGORA v4.0       Prompt E: Integración Módulos   Conexiones M1-M8, Event Bus, ChromaDB                   1 sesión

  6      ÁGORA v4.0       Prompt F: GIS + Visualización   Mapas calor PostGIS, capas GeoJSON                      1 sesión

  7      Cualquiera       Prompt G: Multi-Agent Bridge    Conector M11 Event Bus bidireccional                    1 sesión
  ------ ---------------- ------------------------------- ------------------------------------------------------- -----------------

1.2 Prerequisitos

-   Documento PAE_Precession_Analytics_Engine_M11.docx disponible como referencia (generado en chat de Precesión)

-   Acceso al chat DATAPOLIS v3.0 con código fuente actualizado (o archivo ZIP del repositorio)

-   Acceso al chat ÁGORA v4.0 / AGORA 5 con código fuente actualizado (o archivo ZIP del repositorio)

-   Archivo DATAPOLIS_MULTIAGENT_ECOSYSTEM_v2.tar.gz para referencia del Multi-Agent System

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| IMPORTANTE: ADJUNTAR DOCUMENTO PAE                                                                                                                                                                                                                                                |
|                                                                                                                                                                                                                                                                                   |
| Al usar cada prompt, adjunta el archivo PAE_Precession_Analytics_Engine_M11.docx al chat. Esto permite que Claude tenga acceso directo a la especificación técnica completa, código base, modelos de datos y diagramas de arquitectura sin depender exclusivamente de la memoria. |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

2. PROMPTS PARA CHAT DATAPOLIS v3.0

2.1 PROMPT A: Core Backend PAE (Laravel 11)

Copiar y pegar en el chat DATAPOLIS v3.0. Adjuntar el documento PAE .docx.

  ═══════════════════════════════════════════════════════════════

  IMPLEMENTAR MÓDULO M11 PAE - PRECESSION ANALYTICS ENGINE

  Fase 1/3: Core Backend Laravel 11

  ═══════════════════════════════════════════════════════════════

  CONTEXTO:

  Se ha diseñado el Módulo M11 PAE (Precession Analytics Engine) como

  nuevo componente del Sistema Multi-Agente DATAPOLIS AI v2.0.

  El documento adjunto contiene la especificación técnica completa.

  El PAE analiza efectos precesionales (impactos indirectos a +90°)

  de intervenciones urbanas e inmobiliarias, basado en la teoría de

  precesión sistémica de R. Buckminster Fuller.

  IMPLEMENTAR EN ESTE ORDEN:

  1. MODELO DE DATOS (Migraciones Laravel):

  - Tabla precession_analyses (UUID, location PostGIS, scores,

  ML predictions, efectos por ángulo 0°/45°/90°/135°/180°)

  - Tabla precession_graph_nodes (ontología territorial)

  - Tabla precession_graph_edges (relaciones precesionales)

  - Tabla precession_alerts (alertas predictivas)

  - Relaciones con tablas existentes: copropiedades, unidades,

  gastos_comunes, compliance, tributario

  2. MODELOS ELOQUENT:

  - PrecessionAnalysis.php (con scopes espaciales)

  - PrecessionGraphNode.php

  - PrecessionGraphEdge.php

  - PrecessionAlert.php

  - Relaciones: belongsTo Copropiedad, hasMany Alerts

  3. SERVICIO PRINCIPAL:

  - app/Services/PrecessionService.php

  - Método analyzeCopropiedad(): construye contexto desde

  módulos existentes (tributario, gastos, compliance, alícuotas)

  y llama al PAE Core (Multi-Agent M11 FastAPI)

  - Método calculateInvestmentScore(): scoring precesional

  - Método generateAlerts(): detección de alertas

  - Método comparePrecession(): comparar copropiedades

  - Cache con Redis (TTL 1h para análisis, 24h para scoring)

  - Integrar con MultiAgentService existente (HTTP POST)

  4. CONTROLADOR API:

  - app/Http/Controllers/Api/PrecessionController.php

  - Endpoints RESTful con validación FormRequest

  - Responses con PrecessionResource (API Resource)

  5. RUTAS API:

  - POST /api/v1/pae/analyze/copropiedad/{id}

  - GET /api/v1/pae/dashboard/{copropiedadId}

  - GET /api/v1/pae/heatmap

  - POST /api/v1/pae/investment-score

  - GET /api/v1/pae/alerts

  - POST /api/v1/pae/compare

  - GET /api/v1/pae/report/{copropiedadId}

  - Middleware: auth:sanctum

  6. CONFIGURACIÓN:

  - config/datapolis.php: pae_api_url, pae_api_key, cache_ttl

  - .env: PAE_API_URL=http://localhost:8000/api/v1/pae

  7. EVENTOS:

  - PrecessionAnalysisCompleted (event + listener)

  - PrecessionAlertTriggered (event + notification)

  REGLAS:

  - Seguir convenciones del proyecto existente (namespaces, coding

  style, estructura de carpetas ya establecida)

  - Utilizar los servicios existentes como dependencias (no duplicar)

  - Documentar con PHPDoc completo

  - Incluir tests unitarios básicos con PHPUnit

  VER DOCUMENTO ADJUNTO: Secciones 3, 4 y 9 para código base,

  arquitectura y modelo de datos detallado.

  ═══════════════════════════════════════════════════════════════

2.2 PROMPT B: Integración con Módulos Existentes

Usar después de completar Prompt A exitosamente.

  ═══════════════════════════════════════════════════════════════

  MÓDULO M11 PAE - Fase 2/3: Integración con Módulos Existentes

  ═══════════════════════════════════════════════════════════════

  CONTEXTO:

  El core backend del PAE ya está implementado (PrecessionService,

  Controller, Migraciones, Rutas). Ahora integrar con los módulos

  DATAPOLIS existentes para que el PAE consuma y alimente datos.

  INTEGRAR CON ESTOS MÓDULOS:

  1. MÓDULO TRIBUTARIO (M04):

  - Leer: DJ 1879, DJ 1907, PPM, IVA, F29 histórico

  - Escribir: predicción carga tributaria futura

  - Evento: precession.tax_risk_updated

  - Agregar método en PrecessionService:

  buildTaxContext(Copropiedad $copropiedad): array

  2. MÓDULO GASTOS COMUNES (M05):

  - Leer: histórico gastos, tendencia, estacionalidad

  - Escribir: predicción gasto común a 12-36 meses

  - Evento: precession.expense_forecast

  - Agregar método:

  buildExpenseContext(Copropiedad $copropiedad): array

  3. MÓDULO COMPLIANCE DS7-2025 (M06):

  - Leer: score DS7, estado Ley 21.442, brechas detectadas

  - Escribir: probabilidad cambio normativo

  - Evento: precession.compliance_alert

  - Agregar método:

  buildComplianceContext(Copropiedad $copropiedad): array

  4. MÓDULO ALÍCUOTAS LEY 21.442 (M07):

  - Leer: distribución alícuotas, ponderadores, avalúos SII

  - Escribir: proyección revalúo y efecto sobre alícuotas

  - Evento: precession.aliquot_projection

  5. MÓDULO VALORIZACIÓN (M08):

  - Leer: avalúo fiscal, transacciones CBR, arriendos zona

  - Escribir: valorización precesional +90° a 12-60 meses

  - Evento: precession.valuation_updated

  6. MÓDULO ARRIENDOS (M16):

  - Leer: precio arriendo/m², vacancia, tendencia

  - Escribir: predicción arriendo ajustado por precesión

  - Evento: precession.rental_forecast

  IMPLEMENTAR:

  - Observer: PrecessionObserver que escuche cambios en modelos

  de los módulos anteriores y dispare re-cálculo precesional

  - Job: ScheduledPrecessionAnalysis (artisan schedule:run diario)

  - Notification: PrecessionAlertNotification (email + DB)

  - Tests de integración: verificar flujo completo

  Copropiedad → PrecessionService → PAE Core → Alerts

  VER DOCUMENTO PAE ADJUNTO: Sección 4.2 tabla de conexiones.

  ═══════════════════════════════════════════════════════════════

2.3 PROMPT C: Frontend Dashboard Precesional

Usar después de completar Prompt B exitosamente.

  ═══════════════════════════════════════════════════════════════

  MÓDULO M11 PAE - Fase 3/3: Frontend Dashboard Precesional

  ═══════════════════════════════════════════════════════════════

  CONTEXTO:

  Backend PAE completo e integrado con módulos DATAPOLIS.

  Ahora crear interfaz visual para usuarios finales.

  CREAR EN NEXT.JS 14 + TYPESCRIPT + TAILWIND:

  1. PÁGINA DASHBOARD PRECESIONAL (/dashboard/precession):

  - Card resumen: Score precesional, Risk score, Opportunity

  - Gráfico radar: efectos por ángulo (0°, 45°, 90°, 135°, 180°)

  - Timeline: efectos ordenados por horizonte temporal

  - KPIs: multiplicador precesional, confianza modelo, alertas

  2. PÁGINA ANÁLISIS (/precession/analyze/{copropiedadId}):

  - Formulario: seleccionar copropiedad, horizonte, radio

  - Botón ejecutar análisis (POST /api/v1/pae/analyze/...)

  - Visualización resultados: tabla por ángulo con semaforización

  - Sección ML: predicciones con intervalos confianza

  3. PÁGINA COMPARADOR (/precession/compare):

  - Seleccionar 2-4 copropiedades

  - Gráfico comparativo de scores precesionales

  - Tabla side-by-side de efectos

  4. PÁGINA ALERTAS (/precession/alerts):

  - Listado alertas activas con severidad (info/warning/critical)

  - Filtros: tipo, fecha, copropiedad

  - Acción: marcar como leída, generar reporte

  5. PÁGINA REPORTE INVERSOR (/precession/report/{id}):

  - Vista previa reporte PDF descargable

  - Datos: scoring, predicciones, comparativa zona

  - Botón generar PDF (GET /api/v1/pae/report/{id})

  COMPONENTES REUTILIZABLES:

  - PrecessionRadarChart (Recharts)

  - PrecessionScoreCard

  - PrecessionTimeline

  - PrecessionAlertBadge

  - PrecessionHeatmapMini (placeholder para integración futura mapa)

  SEGUIR el diseño y convenciones del frontend DATAPOLIS existente.

  ═══════════════════════════════════════════════════════════════

3. PROMPTS PARA CHAT ÁGORA v4.0

+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| CHAT DESTINO: AGORA 5_ DATAPOLIS-ÁGORA                                                                                                                                                                                                            |
|                                                                                                                                                                                                                                                   |
| Estos prompts van dirigidos al chat de consolidación ÁGORA v4.0 donde se está desarrollando la integración completa DATAPOLIS-ÁGORA con el Sistema Multi-Agente. El PAE opera aquí a nivel territorial (meso/macro), no a nivel de copropiedades. |
+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

3.1 PROMPT D: Core Backend PAE (FastAPI)

Copiar y pegar en el chat ÁGORA v4.0. Adjuntar el documento PAE .docx.

  ═══════════════════════════════════════════════════════════════

  IMPLEMENTAR MÓDULO M11 PAE - PRECESSION ANALYTICS ENGINE

  Fase 1/3: Core Backend FastAPI + PostGIS

  ═══════════════════════════════════════════════════════════════

  CONTEXTO:

  Se ha diseñado el Módulo M11 PAE (Precession Analytics Engine)

  como nuevo componente del Sistema Multi-Agente DATAPOLIS AI v2.0.

  El documento adjunto contiene la especificación técnica completa.

  El PAE en ÁGORA opera a nivel TERRITORIAL (meso/macro),

  analizando efectos precesionales de intervenciones urbanas sobre

  comunas, zonas y cuencas urbanas completas.

  IMPLEMENTAR EN ESTE ORDEN:

  1. MODELOS PYDANTIC:

  - TerritorialInterventionInput (tipo, location, comuna,

  scale, parameters, time_horizon, radius)

  - PrecessionMapOutput (zones GeoJSON, heatmap, predictions)

  - PrecessionNode, PrecessionEdge (grafo ontológico)

  - PrecessionAlert (severidad, área afectada, impacto UF)

  2. PRECESSION GRAPH ENGINE:

  - agora/engines/precession_graph_engine.py

  - Grafo dirigido ponderado con NetworkX

  - Ontología base: nodos territoriales chilenos

  (permisos, valor_suelo, densidad, equipamiento,

  transporte, calidad_ambiental, indice_social)

  - Método analyze_precession(): BFS multinivel

  - Método simulate_scenarios(): Monte Carlo

  - Método calculate_multiplier(): valor precesional neto

  3. SPATIAL PRECESSION ENGINE:

  - agora/engines/spatial_precession.py

  - PostGIS: zonas de influencia concéntricas

  (300m/0°, 500m/45°, 1000m/90°, 2000m/135°, 5000m/180°)

  - Buffers + intersecciones con parcelas catastrales

  - Heatmap precesional: grid hexagonal con scores

  - Export GeoJSON para frontend de mapas

  4. ML PREDICTION ENGINE:

  - agora/engines/ml_prediction_engine.py

  - Modelos: XGBoost (valoriz.), Prophet (series temporales),

  Random Forest (densificación), LSTM (morosidad)

  - Pipeline: feature engineering → train → predict

  - Integrar con Ollama para narrativas inteligentes

  5. SERVICIO PRINCIPAL:

  - agora/services/precession_service.py

  - build_territorial_context(): obtener datos de M1-M8

  - analyze_precession(): orquestar Graph + Spatial + ML

  - simulate_scenarios(): ejecutar Monte Carlo territorial

  - generate_alerts(): detectar umbrales críticos

  6. ROUTER FASTAPI:

  - agora/routers/precession_router.py

  - POST /pae/territorial/analyze (análisis completo)

  - GET /pae/territorial/simulate/{comuna_code}

  - GET /pae/territorial/heatmap/{comuna_code}

  - GET /pae/territorial/alerts

  - POST /pae/territorial/compare-zones

  - GET /pae/territorial/report/{analysis_id}

  - POST /pae/territorial/investment-map

  7. MIGRACIONES SQL (PostgreSQL + PostGIS):

  - Tablas: precession_analyses, precession_graph_nodes,

  precession_graph_edges, precession_alerts

  - Índices GIST espaciales, índices temporales

  - Ver Sección 9 del documento PAE adjunto

  8. EVENT BUS:

  - Publicar: precession.territorial.analyzed

  - Publicar: precession.alert.triggered

  - Suscribir: zonificacion.updated, plusvalia.calculated

  REGLAS:

  - Seguir convenciones del proyecto ÁGORA existente

  - Async/await en todos los servicios

  - Typing completo con Python type hints

  - Docstrings Google-style

  - Tests con pytest + pytest-asyncio

  VER DOCUMENTO ADJUNTO: Secciones 3, 5 y 9.

  ═══════════════════════════════════════════════════════════════

3.2 PROMPT E: Integración con Módulos ÁGORA

Usar después de completar Prompt D exitosamente.

  ═══════════════════════════════════════════════════════════════

  MÓDULO M11 PAE - Fase 2/3: Integración Módulos ÁGORA v4.0

  ═══════════════════════════════════════════════════════════════

  CONTEXTO:

  Core PAE implementado (Graph Engine, Spatial Engine, ML Engine,

  Router, Service). Ahora integrar con los 8 módulos ÁGORA.

  INTEGRAR CON ESTOS MÓDULOS:

  1. M1 ZONIFICACIÓN:

  - Leer: PRC vigente, zonas uso suelo, constructibilidad

  - Escribir: predicción presión cambio PRC, zonas transición

  - Evento: precession.zonification_pressure

  - En PrecessionService: build_zonification_context()

  2. M2 PLUSVALÍAS:

  - Leer: transacciones históricas, tendencia valor/m²

  - Escribir: valorización precesional +90° (5-20 años)

  - Evento: precession.plusvalia_forecast

  - En PrecessionService: build_plusvalia_context()

  3. M3 MERCADO SUELO:

  - Leer: oferta/demanda, precios publicados, absorción

  - Escribir: predicción transformación mercado por precesión

  - Evento: precession.market_transformation

  4. M5 MEDIO AMBIENTE:

  - Leer: calidad aire, agua, áreas verdes, riesgos

  - Escribir: impacto ambiental precesional de densificación

  - Evento: precession.environmental_impact

  5. M6 PARTICIPACIÓN CIUDADANA:

  - Leer: consultas, reclamos, demandas sociales

  - Escribir: predicción demanda social emergente

  - Evento: precession.social_demand_forecast

  - Integrar con M01 Chatbot (Multi-Agent): respuestas IA

  sobre efectos precesionales a consultas ciudadanas

  6. M8 GIS:

  - Leer: capas geoespaciales, Sentinel-2, catastro

  - Escribir: capas GeoJSON de zonas precesionales

  - Evento: precession.gis_layers_updated

  - Integrar con M04 Detector (Multi-Agent): análisis

  satelital de cambios físicos post-intervención

  INTEGRAR CON MULTI-AGENT SYSTEM:

  - M01 Chatbot: narrativas precesionales para ciudadanos

  - M03 Buscador: búsqueda semántica en análisis precesionales

  - M04 Detector: validación satelital de efectos predichos

  - M07 Plusvalía: alimentar ML con predicciones precesionales

  - M09 Constructibilidad: análisis precesional de PRC

  IMPLEMENTAR:

  - PrecessionEventSubscriber: escuchar eventos de todos los

  módulos y disparar re-análisis cuando hay datos nuevos

  - ChromaDB: indexar análisis precesionales para RAG

  - Celery tasks: análisis asincrónicos pesados (ML + Spatial)

  - Tests integración: flujo completo intervención → PAE → capas

  VER DOCUMENTO PAE ADJUNTO: Sección 5.2 tabla de conexiones.

  ═══════════════════════════════════════════════════════════════

3.3 PROMPT F: GIS + Visualización Territorial

Usar después de completar Prompt E exitosamente.

  ═══════════════════════════════════════════════════════════════

  MÓDULO M11 PAE - Fase 3/3: GIS + Visualización Territorial

  ═══════════════════════════════════════════════════════════════

  CONTEXTO:

  Backend PAE completo e integrado con módulos ÁGORA + Multi-Agent.

  Ahora crear capas GIS avanzadas y endpoints de visualización.

  IMPLEMENTAR:

  1. CAPAS GIS PRECESIONALES (PostGIS):

  - Zonas influencia concéntricas (5 anillos por ángulo)

  - Heatmap hexagonal: grid H3 con scores precesionales

  - Isocronas de impacto temporal (cuándo se manifiesta)

  - Overlay con PRC: zonas de tensión normativa

  - Export: GeoJSON, MVT (tiles vectoriales), WMS

  2. ENDPOINTS DE VISUALIZACIÓN:

  - GET /pae/gis/influence-zones/{analysis_id}

  (GeoJSON con polígonos de influencia por ángulo)

  - GET /pae/gis/heatmap/{comuna_code}?resolution=7

  (Grid H3 hexagonal con scores)

  - GET /pae/gis/timeline-map/{analysis_id}

  (Animación temporal de manifestación de efectos)

  - GET /pae/gis/prc-tension/{comuna_code}

  (Overlay zonas precesión vs PRC vigente)

  - GET /pae/gis/investment-opportunities

  (Mapa de oportunidades de inversión territorial)

  3. CASO PUDAHUEL (DATOS PILOTO):

  - Cargar datos base: PRC Pudahuel, catastro SII zona

  - Definir intervención: 2,500 viviendas Lo Aguirre/Noviciado

  - Ejecutar análisis completo con todos los ángulos

  - Generar reporte territorial con multiplicador precesional

  - Visualizar zonas de influencia sobre mapa real

  4. REPORTE PDF TERRITORIAL:

  - GET /pae/report/territorial/{analysis_id}

  - Contenido: resumen ejecutivo, mapa, tabla efectos,

  predicciones ML, recomendaciones, fuentes

  - Formato: profesional para presentación a municipio/GORE

  VER DOCUMENTO PAE ADJUNTO: Secciones 3.2.3 y 6.

  ═══════════════════════════════════════════════════════════════

4. PROMPT UNIVERSAL: BRIDGE MULTI-AGENT

+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| PROMPT PARA CUALQUIER CHAT                                                                                                                                                                                                   |
|                                                                                                                                                                                                                              |
| Este prompt conecta el PAE M11 como puente bidireccional entre DATAPOLIS v3.0 y ÁGORA v4.0 a través del Event Bus del Sistema Multi-Agente. Puede ejecutarse en cualquiera de los dos chats después de las fases anteriores. |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

4.1 PROMPT G: Conector Bidireccional PAE

  ═══════════════════════════════════════════════════════════════

  MÓDULO M11 PAE - Bridge Bidireccional DATAPOLIS ↔ ÁGORA

  ═══════════════════════════════════════════════════════════════

  CONTEXTO:

  El PAE M11 ya está implementado en ambas plataformas:

  - DATAPOLIS v3.0: PrecessionService.php (nivel micro/copropiedades)

  - ÁGORA v4.0: precession_service.py (nivel meso/territorial)

  Ahora crear el puente bidireccional para que ambas capas se

  alimenten mutuamente a través del Event Bus del Multi-Agent.

  IMPLEMENTAR:

  1. EVENT BUS BRIDGE:

  - Cuando DATAPOLIS detecta cambio significativo en

  copropiedades de una zona → notificar a ÁGORA para

  re-calcular análisis territorial de esa zona

  - Cuando ÁGORA detecta transformación territorial →

  notificar a DATAPOLIS para ajustar scores de todas

  las copropiedades en el área afectada

  Eventos DATAPOLIS → ÁGORA:

  - pae.datapolis.cluster_anomaly (cluster de morosidad alta)

  - pae.datapolis.valuation_shift (cambio valoriz. >15%)

  - pae.datapolis.compliance_wave (ola de regularizaciones)

  Eventos ÁGORA → DATAPOLIS:

  - pae.agora.zone_transformation (cambio uso suelo)

  - pae.agora.infrastructure_impact (nueva infraestructura)

  - pae.agora.prc_pressure (presión regulatoria detectada)

  - pae.agora.environmental_alert (riesgo ambiental zona)

  2. SHARED CHROMADB COLLECTION:

  - Collection: 'pae_precession_analyses'

  - Indexar todos los análisis de ambas plataformas

  - Embeddings con nomic-embed-text (Ollama)

  - Permitir búsqueda semántica cross-platform

  - Ej: 'Qué copropiedades serán afectadas por la extensión

  de línea de metro en Pudahuel?' → busca en ambos

  3. AGGREGATION SERVICE:

  - Servicio que combina resultados micro (DATAPOLIS) con

  macro (ÁGORA) para generar vista integrada

  - Endpoint: GET /pae/integrated/{zona_id}

  - Response: scores micro + macro + correlaciones

  4. FEEDBACK LOOP:

  - Las predicciones PAE de DATAPOLIS validan (o no) las

  predicciones territoriales de ÁGORA y viceversa

  - Almacenar accuracy de predicciones para mejorar modelos

  - Dashboard de calibración: predicho vs. observado

  ═══════════════════════════════════════════════════════════════

5. CHECKLIST DE VALIDACIÓN

5.1 DATAPOLIS v3.0 — Criterios de Aceptación

  ----- ----------------------------------------------------------------------- ----------- -----------
  #     Criterio                                                                Prioridad   Check

  1     Migraciones ejecutan sin errores (php artisan migrate)                  CRÍTICA     ☐

  2     PrecessionService inyectable vía constructor (DI)                       CRÍTICA     ☐

  3     POST /api/v1/pae/analyze/copropiedad/{id} retorna 200 con JSON válido   CRÍTICA     ☐

  4     Scores precesionales calculados correctamente (0-100)                   CRÍTICA     ☐

  5     Integración con TributarioService funcional                             ALTA        ☐

  6     Integración con GastosComunesService funcional                          ALTA        ☐

  7     Integración con ComplianceService funcional                             ALTA        ☐

  8     Eventos publicados correctamente al Event Bus                           ALTA        ☐

  9     Cache Redis funcional (invalidación correcta)                           MEDIA       ☐

  10    Dashboard React renderiza sin errores                                   ALTA        ☐

  11    Reporte PDF generado correctamente                                      MEDIA       ☐

  12    Tests PHPUnit pasan (>80% cobertura PAE)                                ALTA        ☐
  ----- ----------------------------------------------------------------------- ----------- -----------

5.2 ÁGORA v4.0 — Criterios de Aceptación

  ----- -------------------------------------------------------- ----------- -----------
  #     Criterio                                                 Prioridad   Check

  1     Precession Graph Engine inicializa con ontología base    CRÍTICA     ☐

  2     Spatial Engine genera zonas PostGIS válidas              CRÍTICA     ☐

  3     POST /pae/territorial/analyze retorna GeoJSON válido     CRÍTICA     ☐

  4     Zonas de influencia concéntricas correctas (5 anillos)   CRÍTICA     ☐

  5     Integración con M1 Zonificación funcional                ALTA        ☐

  6     Integración con M2 Plusvalías funcional                  ALTA        ☐

  7     Integración con M8 GIS funcional (capas exportadas)      ALTA        ☐

  8     ML Prediction Engine ejecuta sin errores                 ALTA        ☐

  9     Event Bus publica/suscribe correctamente                 ALTA        ☐

  10    ChromaDB indexa análisis para RAG                        MEDIA       ☐

  11    Caso Pudahuel ejecuta completo (multiplicador ~4.76x)    ALTA        ☐

  12    Tests pytest pasan (>80% cobertura PAE)                  ALTA        ☐
  ----- -------------------------------------------------------- ----------- -----------

5.3 Bridge Multi-Agent — Criterios de Aceptación

  ----- ----------------------------------------------------- ----------- -----------
  #     Criterio                                              Prioridad   Check

  1     Eventos DATAPOLIS → ÁGORA se propagan correctamente   CRÍTICA     ☐

  2     Eventos ÁGORA → DATAPOLIS se propagan correctamente   CRÍTICA     ☐

  3     ChromaDB compartida indexa de ambas fuentes           ALTA        ☐

  4     Búsqueda semántica cross-platform funcional           ALTA        ☐

  5     Endpoint /pae/integrated/ combina micro + macro       ALTA        ☐

  6     Feedback loop registra accuracy de predicciones       MEDIA       ☐
  ----- ----------------------------------------------------- ----------- -----------
